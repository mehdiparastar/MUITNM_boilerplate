FROM mysql

ARG MYSQL_ROOT_PASSWORD
ARG MYSQL_DATABASE
ARG MYSQL_USER
ARG MYSQL_PASSWORD
ARG MYSQL_TEST_DATABASE
ARG MYSQL_TEST_USER
ARG MYSQL_TEST_PASSWORD

ENV MYSQL_ROOT_PASSWORD=$MYSQL_ROOT_PASSWORD
ENV MYSQL_DATABASE=$MYSQL_DATABASE
ENV MYSQL_USER=$MYSQL_USER
ENV MYSQL_PASSWORD=$MYSQL_PASSWORD
ENV MYSQL_TEST_DATABASE=$MYSQL_TEST_DATABASE
ENV MYSQL_TEST_USER=$MYSQL_TEST_USER
ENV MYSQL_TEST_PASSWORD=$MYSQL_TEST_PASSWORD

USER root
RUN echo ${MYSQL_TEST_DATABASE}
RUN chmod -R 777 ./docker-entrypoint-initdb.d
COPY ./init/db-setup-entrypoint.sh ./docker-entrypoint-initdb.d
CMD ./docker-entrypoint-initdb.d/db-setup-entrypoint.sh
